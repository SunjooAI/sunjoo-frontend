{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Samsung/Desktop/BeJuRyu/2023_1_WAT_BeJuRyu/front/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Samsung/Desktop/BeJuRyu/2023_1_WAT_BeJuRyu/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Samsung/Desktop/BeJuRyu/2023_1_WAT_BeJuRyu/front/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";/*TODO\r\n  1. 카카오 로그아웃시 쿠키 clear 추가 (자사 서비스 로그아웃은 됨)*/import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import s from\"./styled\";import{useDispatch}from\"react-redux\";import settingCookie from\"../../utils/settingCookie\";import{jsx as _jsx}from\"react/jsx-runtime\";var _window=window,Kakao=_window.Kakao;function Logout(){//const dispatch = useDispatch();\nvar navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLogin=_useState2[0],setIsLogin=_useState2[1];function deleteCookie(){document.cookie=\"authorize-access-token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;\";document.cookie=\"_kahai=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;\";}// logout 로컬 구현\nvar logout=function logout(){settingCookie(\"remove\");//dispatch(GET_NAME(\"\"));\nnavigate(\"/login\");};var logoutWithKakao=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Kakao.Auth.logout();case 3:logout();console.log(\"logout ok\\naccess token -> \"+Kakao.Auth.getAccessToken());deleteCookie();setIsLogin(false);localStorage.clear();_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](0);alert(_context.t0.message);case 13:case\"end\":return _context.stop();}},_callee,null,[[0,10]]);}));return function logoutWithKakao(){return _ref.apply(this,arguments);};}();useEffect(function(){// if (Kakao.Auth.getAccessToken()) {\nsetIsLogin(false);// }\n},[]);var logoutView=/*#__PURE__*/_jsx(s.LogoutButton,{onClick:logoutWithKakao,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"});return/*#__PURE__*/_jsx(\"div\",{className:\"Logout\",children:logoutView});}export default Logout;","map":{"version":3,"names":["useEffect","useState","useNavigate","s","useDispatch","settingCookie","jsx","_jsx","_window","window","Kakao","Logout","navigate","_useState","_useState2","_slicedToArray","isLogin","setIsLogin","deleteCookie","document","cookie","logout","logoutWithKakao","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","Auth","console","log","getAccessToken","localStorage","clear","t0","alert","message","stop","apply","arguments","logoutView","LogoutButton","onClick","children","className"],"sources":["C:/Users/Samsung/Desktop/BeJuRyu/2023_1_WAT_BeJuRyu/front/src/components/MyPage/Logout.jsx"],"sourcesContent":["/*TODO\r\n  1. 카카오 로그아웃시 쿠키 clear 추가 (자사 서비스 로그아웃은 됨)*/\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport s from \"./styled\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport settingCookie from \"../../utils/settingCookie\";\r\nconst { Kakao } = window;\r\n\r\nfunction Logout() {\r\n  //const dispatch = useDispatch();\r\n  const navigate = useNavigate();\r\n  const [isLogin, setIsLogin] = useState(false);\r\n\r\n  function deleteCookie() {\r\n    document.cookie =\r\n      \"authorize-access-token=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n    document.cookie = \"_kahai=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;\";\r\n  }\r\n\r\n  // logout 로컬 구현\r\n  const logout = () => {\r\n    settingCookie(\"remove\");\r\n    //dispatch(GET_NAME(\"\"));\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  const logoutWithKakao = async () => {\r\n    //logout();\r\n    // Kakao.API.request({\r\n    //   url: \"/v1/user/unlink\",\r\n    // })\r\n    //   .then(function (response) {\r\n    //     alert(response);\r\n    //   })\r\n    //   .catch(function (error) {\r\n    //     alert(error);\r\n    //   });\r\n\r\n    try {\r\n      await Kakao.Auth.logout();\r\n      logout();\r\n\r\n      console.log(\"logout ok\\naccess token -> \" + Kakao.Auth.getAccessToken());\r\n      deleteCookie();\r\n      setIsLogin(false);\r\n      localStorage.clear();\r\n    } catch (error) {\r\n      alert(error.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    // if (Kakao.Auth.getAccessToken()) {\r\n    setIsLogin(false);\r\n    // }\r\n  }, []);\r\n\r\n  const logoutView = (\r\n    <s.LogoutButton onClick={logoutWithKakao}>로그아웃</s.LogoutButton>\r\n  );\r\n\r\n  return <div className=\"Logout\">{logoutView}</div>;\r\n}\r\n\r\nexport default Logout;\r\n"],"mappings":"6bAAA;AACA,6CAEA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,CAAC,KAAM,UAAU,CACxB,OAASC,WAAW,KAAQ,aAAa,CAEzC,MAAO,CAAAC,aAAa,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBACtD,IAAAC,OAAA,CAAkBC,MAAM,CAAhBC,KAAK,CAAAF,OAAA,CAALE,KAAK,CAEb,QAAS,CAAAC,MAAMA,CAAA,CAAG,CAChB;AACA,GAAM,CAAAC,QAAQ,CAAGV,WAAW,EAAE,CAC9B,IAAAW,SAAA,CAA8BZ,QAAQ,CAAC,KAAK,CAAC,CAAAa,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAtCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAE1B,QAAS,CAAAI,YAAYA,CAAA,CAAG,CACtBC,QAAQ,CAACC,MAAM,CACb,yEAAyE,CAC3ED,QAAQ,CAACC,MAAM,CAAG,yDAAyD,CAC7E,CAEA;AACA,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAA,CAAS,CACnBhB,aAAa,CAAC,QAAQ,CAAC,CACvB;AACAO,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,GAAM,CAAAU,eAAe,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAad,CAAAtB,KAAK,CAACuB,IAAI,CAACZ,MAAM,EAAE,QACzBA,MAAM,EAAE,CAERa,OAAO,CAACC,GAAG,CAAC,6BAA6B,CAAGzB,KAAK,CAACuB,IAAI,CAACG,cAAc,EAAE,CAAC,CACxElB,YAAY,EAAE,CACdD,UAAU,CAAC,KAAK,CAAC,CACjBoB,YAAY,CAACC,KAAK,EAAE,CAACR,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAS,EAAA,CAAAT,QAAA,aAErBU,KAAK,CAACV,QAAA,CAAAS,EAAA,CAAME,OAAO,CAAC,CAAC,yBAAAX,QAAA,CAAAY,IAAA,MAAAf,OAAA,iBAExB,kBAvBK,CAAAL,eAAeA,CAAA,SAAAC,IAAA,CAAAoB,KAAA,MAAAC,SAAA,OAuBpB,CAED5C,SAAS,CAAC,UAAM,CACd;AACAiB,UAAU,CAAC,KAAK,CAAC,CACjB;AACF,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAA4B,UAAU,cACdtC,IAAA,CAACJ,CAAC,CAAC2C,YAAY,EAACC,OAAO,CAAEzB,eAAgB,CAAA0B,QAAA,CAAC,0BAAI,EAC/C,CAED,mBAAOzC,IAAA,QAAK0C,SAAS,CAAC,QAAQ,CAAAD,QAAA,CAAEH,UAAU,EAAO,CACnD,CAEA,cAAe,CAAAlC,MAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}